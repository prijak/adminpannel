var langCodeList="Hindi,Tamil,Telugu,Malayalam,Punjabi,Bengali,Oriya,Gujarati,Kannada,Marathi";
document.onreadystatechange = function () {

	var urlName = window.location.pathname;
	var langName = GetLanguage(GetSubDomain(window.location.hostname));

	/*GenerateDropDown();*/
}
window.onload = function(){
	var ul = document.getElementById('minilang-links');
	ul.onclick = function(event) {
	    var target = getEventTarget(event);
	    if(target.getAttribute('data-lang')){
	    	RedurectUrl(target.getAttribute('data-lang'));
	    }
	};
	let mobileUL = document.querySelectorAll('ul.minilang-links-ul > li > a');
	for (let elem of mobileUL) {
		if(elem.getAttribute('data-lang')){
			elem.setAttribute("href", getRedurectUrl(elem.getAttribute('data-lang')));
		}
	}
}
function getEventTarget(e) {
    e = e || window.event;
    return e.target || e.srcElement; 
}
function ChangeLanguage(dropMenu) {
var strLang = dropMenu.options[dropMenu.selectedIndex].value;
	if (strLang != 'english')
		RedurectUrl(strLang);
}
function getRedurectUrl(strLang) {
	var newUrl = '';
	var strSegment = window.location.pathname;
	var strSubdomain = window.location.hostname.split(".");
	var curLang = strSubdomain[0];

	if (strSubdomain.length==2) {
		newUrl = window.location.protocol + "//" + strLang.toString().toLowerCase() +"."+ window.location.hostname + strSegment;
	} 
	else if(strSubdomain.length>2)
	{
		var origHost = window.location.host;
		if(langCodeList.toString().toLowerCase().indexOf(curLang.toString().toLowerCase()) > -1)
			origHost=window.location.host.replace(curLang, "");
		
			if (strLang == "English") {
				newUrl = window.location.protocol + "//" + "www" + ".myborosil" + ".com" + strSegment;
			} else {
				newUrl = window.location.protocol + "//" + strLang.toString().toLowerCase() + ".myborosil.com" + strSegment;
			}
	}
	else
		newUrl = window.location.protocol + '//' + window.location.host + strSegment;
	
	return newUrl;
}
function RedurectUrl(strLang) {
	var newUrl = '';
	var strSegment = window.location.pathname;
	var strSubdomain = window.location.hostname.split(".");
	var curLang = strSubdomain[0];

	if (strSubdomain.length==2) {
		newUrl = window.location.protocol + "//" + strLang.toString().toLowerCase() +"."+ window.location.hostname + strSegment;
	} 
	else if(strSubdomain.length>2)
	{
		var origHost = window.location.host;
		if(langCodeList.toString().toLowerCase().indexOf(curLang.toString().toLowerCase()) > -1)
			origHost=window.location.host.replace(curLang, "");
		
			if (strLang == "English") {
				newUrl = window.location.protocol + "//" + "www" + ".myborosil" + ".com" + strSegment;
			} else {
				newUrl = window.location.protocol + "//" + strLang.toString().toLowerCase()  + ".myborosil.com" + strSegment;
			}
	}
	else
		newUrl = window.location.protocol + '//' + window.location.host + strSegment;
	
	window.location.href = newUrl;
}
function GenerateDropDown() {
	var select = document.body;
	var options = ["English", "Hindi", "Bengali", "Kannada"];
	var optionShow = ["English", "हिंदी", "বাংলা", "ಕನ್ನಡ"];
	var langName;
	var strSubdomain = window.location.hostname.split(".");
	var curLang = strSubdomain[0];
	if(langCodeList.toString().toLowerCase().indexOf(curLang.toString().toLowerCase()) > -1 && curLang)
	langName=curLang;

	langCodeList = options;
	if (!document.getElementById("ddlLang")) {
		var ddl = document.createElement("select")
			ddl.id = "ddlLang";
		var langDom = document.getElementById("P9Lang")
			if (!langDom)
				document.body.prepend(ddl);
			else
				langDom.appendChild(ddl);
			for (var i = 0; i < options.length; i++) {
				var opt = options[i];
				var optShow=optionShow[i];
				var el = document.createElement("option");
				el.textContent = optShow;
				el.value = opt;
				if (langName && opt.toString().toLowerCase() == langName.toString().toLowerCase())
					el.selected = true;
				document.getElementById("ddlLang").add(el);
			}

			document.getElementById("ddlLang").setAttribute("class", "p9langclass");
			document.getElementById("ddlLang").setAttribute("onMouseOver", "this.size=this.length;");
			document.getElementById("ddlLang").setAttribute("onMouseOut", "this.size=1;");
			document.getElementById("ddlLang").setAttribute("onchange", "ChangeLanguage(this)");
	}
}
function GetSubDomain(hostname) {
	var regexParse = new RegExp('[a-z\-0-9]{2,63}\.[a-z\.]{2,5}$');
	if (hostname) {
		var urlParts = regexParse.exec(hostname);
		return hostname.replace(urlParts[0], '').slice(0, -1);
	}
}
function GetLanguage(strLanguage) {
	if (!strLanguage)
		return strLanguage;

	var strLang;
	switch (strLanguage.toLowerCase()) {
	case "hindi":
		strLang = "Hindi";
		break;
	case "kannada":
		strLang = "Kannada";
		break;
	case "marathi":
		strLang = "Marathi";
		break;
	case "punjabi":
		strLang = "Punjabi";
		break;
	case "telugu":
		strLang = "Telugu";
		break;
	case "tamil":
		strLang = "Tamil";
		break;
	case "malayalam":
		strLang = "Malayalam";
		break;
	case "bengali":
		strLang = "Bengali";
		break;
	case "bangla":
		strLang = "Bangla";
		break;
	case "gujarati":
		strLang = "Gujarati";
		break;
	case "arabic":
		strLang = "Arabic";
		break;
	case "bhojpuri":
		strLang = "Bhojpuri";
		break;
	case "odia":
		strLang = "Odia";
		break;
	case "oriya":
		strLang = "Oriya";
		break;
	case "rajasthani":
		strLang = "Rajasthani";
		break;
	case "assamese":
		strLang = "Assamese";
		break;
	case "english":
		strLang = "en-in";
		break;

	default:
		break;
	}

	return strLang;
}
function Localize(strHtml, querystring) {

	var locText = '';

	var langName = "Hindi";

	try {
		if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
			xmlhttp = new XMLHttpRequest();
		} else { // code for IE6, IE5
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
		if (querystring != '') {
			querystring = "?page=" + querystring;
		}
		xmlhttp.open("POST", "/TranslateText.loc" + querystring, false);
		xmlhttp.setRequestHeader("Content-type", "text/html");

		xmlhttp.send(escape(strHtml));

		locText = unescape(xmlhttp.responseText);
	} catch (Exception) {
		locText = strHtml;
	}

	if (locText.length > 0)
		return locText;
	else
		return strHtml;
}